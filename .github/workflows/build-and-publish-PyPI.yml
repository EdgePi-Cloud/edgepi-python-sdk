# This workflow will build and publish the package to PyPI upon push or merge to main branch

name: Build and Publish to PyPI

on:
  push:
    branches:
      - 'fix-staging-publish'

jobs:
  build-and-publish:
    name: Build and publish Package to PyPI
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: latest tag
    # h
      run: |
        LATEST_TAG=$(git describe --tags `git rev-list --tags --max-count=1`)
        echo $LATEST_TAG
    # - name: Set up Python
    #   uses: actions/setup-python@v3
    #   with:
    #     python-version: '3.10'
    # - name: Install Dependencies
    #   run: |
    #     python -m pip install --upgrade pip
    #     if [ -f requirements_build.txt ]; then python -m pip install -r requirements_build.txt; fi
    # - name: Build Package
    #   run: |
    #     python -m build
    # - name: Publish Package to PyPI
    #   uses: pypa/gh-action-pypi-publish@v1.5.0
    #   with:
    #     # TODO: add PyPI user password or access token
    #     user: __token__
    #     password: ${{ secrets.PYPI_API_TOKEN }}
    # - name: Release Package
    #   uses: ncipollo/release-action@v1.12.0
    #   with:
    #     tag: latest
